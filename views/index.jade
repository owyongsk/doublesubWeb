doctype html
html(lang='en')
  head
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1.0')
    title doubleSub
    // CSS
    link(href='https://fonts.googleapis.com/icon?family=Material+Icons', rel='stylesheet')
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css')
    style.
      h5 {
        text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
      }

  body
    nav.orange.lighten-1(role='navigation')
      .nav-wrapper.container
        a#logo-container.brand-logo(href='#') doubleSub
        ul.right.hide-on-med-and-down
          li
            a(href='#footer') About
        ul#nav-mobile.side-nav
          li
            a(href='#footer') About
        a.button-collapse(href='#', data-activates='nav-mobile')
          i.material-icons menu

    #index-banner.parallax-container(style="height: 400px;")
      .section
        .container
          br
          h2.center.orange-text.text-lighten-4
            | Add another translated subtitles at the bottom to your SRT

          .container(style="position: absolute; bottom: 0px;")
            .center
              h5.white-text.frLangSub.center ¡Espero que tu no eres daltónico!
              h5.white-text.toLangSub.center I hope you're not colorblind!

      .parallax
        img(src="//i.kinja-img.com/gawker-media/image/upload/s--ccLyirFR--/1281133868761630823.jpg")

    .container
      .section
        .row
          form.col.s12(role="form", action="/", method="post", enctype="multipart/form-data")
            .row
              mixin options-for-lang(lang, selectedLang)
                if lang[1] == selectedLang
                  option(value=lang[1] selected="selected") #{lang[0]}
                else
                  option(value=lang[1]) #{lang[0]}

              .input-field.col.s6
                select(name="fromLang")
                  for lang in languages
                    +options-for-lang(lang, "es")
                label Original Language
              .input-field.col.s6
                select(name="toLang")
                  for lang in languages
                    +options-for-lang(lang, "en")
                label New Language
            .row
              .input-field.file-field.col.s12
                .btn.waves-effect.waves-light.red
                  span SRT File
                  input(type="file", name="srt", id="srt")
                  i.material-icons.right add
                .file-path-wrapper
                  input.file-path.validate(type="text" disabled)
            .row
              .input-field.col.s12
                button.right.btn.waves-effect.waves-light.green(type="submit") Translate
                  i.material-icons.right send

    footer#footer.page-footer.black
      .container
        .row
          .col.l6.s12
            h5.white-text About
            p.grey-text.text-lighten-4
              | I am currently trying to learn Spanish and have been downloading
              | Spanish subtitles to be added to my movies and TV shows,
              | however I would still like to be able to have the English
              | subtitles too. That's why I built this!

      .footer-copyright
        .container
          | Made by
          a.orange-text.text-lighten-3(href='http://github.com/owyongsk/doublesubWeb')
            |  owyongsk
    // Scripts
    script(src='//code.jquery.com/jquery-2.1.1.min.js')
    script(src='//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js')
    script.
      (function($){
        $(function(){
          $('.button-collapse').sideNav();
          $('.parallax').parallax();
        }); // end of document ready
      })(jQuery); // end of jQuery name space
      $(document).ready(function() {
        $('select').material_select();
      });
    script.
      $("input:file").change(function(e) {
        calculateHash(e.target.files);
      });
      function calculateHash(d) {
        var b = 65536;
        var e = Array(8);
        pngFile = d[0];
        if (pngFile.fileSize) fs = pngFile.fileSize;
        else fs = pngFile.size;
        for (var a = fs, f = 0; f < 8; f++) {
          e[f] = a & 255;
          a = a >> 8
        }
        a = fs;
        if (pngFile.slice) var c = pngFile.slice(0, b);
        else if (pngFile.mozSlice) var c = pngFile.mozSlice(0, b);
        else if (pngFile.webkitSlice) var c = pngFile.webkitSlice(0, b);
        var g = new FileReader;
        g.onloadend = function (h) {
          if (h.target.readyState == FileReader.DONE) {
            for (var f = h.target.result, d = 0; d < f.length; d++) e[(d + 8) % 8] += f.charCodeAt(d);
            if (pngFile.slice) c = pngFile.slice(a - b);
            else if (pngFile.mozSlice) c = pngFile.mozSlice(a - b, a);
            else if (pngFile.webkitSlice) c = pngFile.webkitSlice(a - b, a);
            var g = new FileReader;
            g.onloadend = function (c) {
              var b = "languages";
              if (c.target.readyState == FileReader.DONE) {
                f = c.target.result;
                for (d = 0; d < f.length; d++) e[(d + 8) % 8] += f.charCodeAt(d);
                a = 'all';
                console.log(binl2hex(e));
              }
            };
            g.readAsBinaryString(c)
          }
        };
        g.readAsBinaryString(c)
      }

      function binl2hex(a) {
        var b = 255;
        a[1] += a[0] >> 8;
        a[0] = a[0] & b;
        a[2] += a[1] >> 8;
        a[1] = a[1] & b;
        a[3] += a[2] >> 8;
        a[2] = a[2] & b;
        a[4] += a[3] >> 8;
        a[3] = a[3] & b;
        a[5] += a[4] >> 8;
        a[4] = a[4] & b;
        a[6] += a[5] >> 8;
        a[5] = a[5] & b;
        a[7] += a[6] >> 8;
        a[6] = a[6] & b;
        a[7] = a[7] & b;
        for (var d = "0123456789abcdef", e = "", c = 7; c > -1; c--) e += d.charAt(a[c] >> 4 & 15) + d.charAt(a[c] & 15);
        return e
      }

    script.
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-64581929-1', 'auto');
      ga('send', 'pageview');
